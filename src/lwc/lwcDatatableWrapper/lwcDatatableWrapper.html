<template>
  <lightning-card class="c__lightning-card">
    <template lwc:if="{isLoading}">
      <lightning-spinner
        alternative-text="Loading"
        size="small"
      ></lightning-spinner>
    </template>
    <template lwc:else>
      <template if:false="{objectNotFound}">
        <div slot="title" class="c__lightning-card-title">
          <div class="c__lightning-card-title">
            <h1>{objectApiName}</h1>
          </div>
          <div class="c__lightning-card-search-bar">
            <lightning-input
              type="search"
              onchange="{handleSearchKeyChange}"
              value="{search.value}"
              placeholder="{search.placeholder}"
              variant="label-hidden"
            >
            </lightning-input>
          </div>
        </div>
        <div slot="actions" class="c__lightning-card-footer">
          <lightning-button label="New"></lightning-button>
        </div>
        <div slot="footer">
          <lightning-button
            variant="base"
            label="Export to CSV"
            title="Export to CSV"
            onclick="{handleExportButtonClick}"
            class="slds-m-left_x-small"
          ></lightning-button>
        </div>
      </template>
      <div class="c__lightning-card-data">
        <template lwc:if="{hasData}">
          <div style="height: 200px">
            <c-lwc-datatable
              key-field="id"
              data="{data}"
              columns="{columns}"
              onloadmore="{handleLoadMore}"
              enable-infinite-loading
            >
              ></c-lwc-datatable
            >
          </div>
        </template>
        <template lwc:else>
          <c-illustration
            size="small"
            illustration="{illustration}"
            message="{illustrationMessage}"
          ></c-illustration>
        </template>
      </div>
    </template>
  </lightning-card>
</template>
